<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Penguin Project</title>
<style>
  :root {
    --bg: rgba(15,15,15,0.85);
    --row: rgba(30,30,30,0.85);
    --hover: rgba(40,40,40,0.9);
    --accent: #f1cad8;
    --txt: #eaeaea;
    --muted: #aaa;
  }
  html,body {margin:0;height:100%;background:transparent;font-family:Arial,sans-serif;color:var(--txt);}
  .wrap {position:fixed;top:50%;left:40px;transform:translateY(-50%);}
  .panel {width:280px;height:480px;background:var(--bg);border-radius:6px;overflow:hidden;
          box-shadow:0 0 20px rgba(0,0,0,.7);display:flex;flex-direction:column;border:1px solid rgba(255,255,255,0.1);}
  .banner {height:100px;background:#111 url('hello-kitty.png') center/cover no-repeat;}
  .list-container {flex:1;position:relative;overflow:hidden;}
  .list {margin:0;padding:0;list-style:none;position:relative;}
  .row {height:36px;line-height:36px;padding:0 14px;font-size:14px;cursor:pointer;
        border-bottom:1px solid rgba(255,255,255,0.05);display:flex;justify-content:space-between;align-items:center;
        background:var(--row);}
  .row:last-child{border-bottom:none;}
  .row:hover {background:var(--hover);}
  .row.active {background:var(--accent);color:#000;font-weight:600;}
  .arrow {font-size:12px;color:var(--muted);}
  .row.active .arrow{color:#000;}
  .checkbox::after {content:"[ ]"; margin-left:auto; color:var(--muted);}
  .checkbox.checked::after {content:"[x]"; color:var(--accent);}
  .row.active.checkbox.checked::after {color:#000;}
  .slider {flex:1;margin-left:10px;height:6px;background:#333;border-radius:3px;position:relative;}
  .slider-fill {height:100%;background:var(--accent);border-radius:3px;}
  .slider-thumb {width:10px;height:10px;background:#fff;border-radius:50%;position:absolute;top:-2px;}
  .bottombar{background:rgba(20,20,20,0.9);padding:4px 8px;font-size:11px;display:flex;justify-content:space-between;
             border-top:1px solid rgba(255,255,255,0.1);}
  .statusbar{background:rgba(0,0,0,0.6);padding:4px 8px;font-size:12px;display:flex;justify-content:space-between;color:#fff;}
</style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <div class="banner"></div>
      <div class="list-container">
        <ul class="list" id="menuList"></ul>
      </div>
      <div class="bottombar"><span>credit: penguin</span><span>lala&lt;3</span></div>
      <div class="statusbar"><span id="statusLeft">ID: ???</span><span id="statusRight">0/0</span></div>
    </div>
  </div>

<script>
  let menus = {
    "main": [
      {id:"general", label:"General", type:"category"},
      {id:"weapons", label:"Weapons", type:"category"},
      {id:"visuals", label:"Visuals", type:"category"}
    ],
    "general": [
      {id:"godmode", label:"Godmode", type:"checkbox", value:false},
      {id:"speed", label:"Speed Multiplier", type:"slider", min:1,max:10,value:1}
    ],
    "weapons": [
      {id:"giveall", label:"Give All Weapons", type:"button"},
      {id:"ammo", label:"Infinite Ammo", type:"checkbox", value:false}
    ],
    "visuals": [
      {id:"esp", label:"ESP", type:"checkbox", value:false},
      {id:"crosshair", label:"Crosshair", type:"checkbox", value:true}
    ]
  };

  let current="main", selected=0, stack=[];

  const el={list:document.getElementById("menuList"),statusRight:document.getElementById("statusRight")};

  function renderMenu(){
    let items=menus[current]; el.list.innerHTML="";
    items.forEach((item,i)=>{
      const row=document.createElement("li");
      row.className="row"+(i===selected?" active":"");
      row.dataset.id=item.id; row.dataset.type=item.type;
      const label=document.createElement("span"); label.textContent=item.label; row.appendChild(label);

      if(item.type==="category"){ row.innerHTML=`<span>${item.label}</span><span class="arrow">â€º</span>`; }
      if(item.type==="checkbox"){ row.classList.add("checkbox"); if(item.value) row.classList.add("checked"); }
      if(item.type==="slider"){
        const slider=document.createElement("div"); slider.className="slider";
        const fill=document.createElement("div"); fill.className="slider-fill";
        fill.style.width=((item.value-item.min)/(item.max-item.min))*100+"%";
        const thumb=document.createElement("div"); thumb.className="slider-thumb";
        thumb.style.left=fill.style.width;
        slider.appendChild(fill); slider.appendChild(thumb); row.appendChild(slider);
      }
      el.list.appendChild(row);
    });
    el.statusRight.textContent=(selected+1)+"/"+items.length;
  }

  function updateSlider(item,dir){
    if(item.type!=="slider") return;
    if(dir==="left" && item.value>item.min) item.value--;
    if(dir==="right" && item.value<item.max) item.value++;
  }

  window.addEventListener("message",ev=>{
    const d=ev.data||{};
    if(d.action==="nav" && d.payload){
      let items=menus[current];
      if(d.payload.type==="up"   && selected>0){selected--;renderMenu();}
      if(d.payload.type==="down" && selected<items.length-1){selected++;renderMenu();}
      if(d.payload.type==="enter"){
        let item=items[selected];
        if(item.type==="category"){ stack.push({menu:current,sel:selected}); current=item.id; selected=0; renderMenu();}
        else if(item.type==="checkbox"){ item.value=!item.value; renderMenu(); MachoPostMessage(JSON.stringify({action:"toggle",id:item.id,value:item.value})); }
        else if(item.type==="button"){ MachoPostMessage(JSON.stringify({action:"button",id:item.id})); }
      }
      if(d.payload.type==="left"||d.payload.type==="right"){
        let item=items[selected]; updateSlider(item,d.payload.type); renderMenu();
        MachoPostMessage(JSON.stringify({action:"slider",id:item.id,value:item.value}));
      }
      if(d.payload.type==="back"){ if(stack.length>0){ let st=stack.pop(); current=st.menu; selected=st.sel; renderMenu(); } }
    }
  });

  renderMenu();
</script>
</body>
</html>
