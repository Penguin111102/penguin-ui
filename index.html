<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Penguin Project</title>
<style>
  :root {
    --bg:#0d0d0d; --row:#1a1a1a; --hover:#2a2a2a;
    --accent:#f1cad8; --txt:#eaeaea; --muted:#aaa;
  }
  * { box-sizing:border-box; }
  html,body { margin:0; height:100%; background:transparent; font-family:Arial,Helvetica,sans-serif; color:var(--txt); }

  .wrap { position:fixed; top:50%; left:40px; transform:translateY(-50%); }
  .panel { width:280px; background:var(--bg); border-radius:6px; overflow:hidden; box-shadow:0 0 15px rgba(0,0,0,.6); border:1px solid #000; display:flex; flex-direction:column; }

  .banner img { width:100%; display:block; height:120px; object-fit:cover; }

  .list-container { position:relative; flex:1; overflow:hidden; }
  .list { margin:0; padding:0; list-style:none; position:relative; }
  .row { padding:9px 14px; font-size:14px; cursor:pointer; user-select:none; background:var(--row); border-bottom:1px solid #000; display:flex; justify-content:space-between; align-items:center; position:relative; z-index:1; }
  .row:last-child { border-bottom:none; }
  .row:hover { background:var(--hover); }
  .row.active { background:var(--accent); color:#000; font-weight:600; }
  .arrow { font-size:12px; color:var(--muted); }
  .row.active .arrow { color:#000; }

  .scrollbar { position:absolute; left:0; top:0; bottom:0; width:6px; background:#111; }
  .scroll-thumb { width:100%; height:32px; background:var(--accent); transition:top .2s ease; position:absolute; left:0; top:0; }

  .bottombar { background:#111; border-top:1px solid #000; padding:4px 8px; font-size:11px; display:flex; justify-content:space-between; color:var(--muted); }

  .notif-container { position:fixed; bottom:20px; right:20px; display:flex; flex-direction:column; gap:8px; z-index:9999; }
  .notif { background:rgba(0,0,0,0.8); color:var(--txt); padding:8px 12px; border-radius:4px; font-size:13px; min-width:180px; box-shadow:0 0 6px rgba(0,0,0,0.5); animation:fadein .3s; }
  @keyframes fadein { from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }
</style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <div class="banner"><img src="hello-kitty.png" alt="Penguin Banner"></div>
      <div class="list-container">
        <ul class="list" id="menuList"></ul>
        <div class="scrollbar"><div class="scroll-thumb" id="scrollThumb"></div></div>
      </div>
      <div class="bottombar">
        <span>credit: penguin</span>
        <span>lala&lt;3</span>
      </div>
    </div>
  </div>

  <div class="notif-container" id="notifContainer"></div>

<script>
  let menuItems = [];   // will be filled from Lua
  let selected = 0;

  const el = {
    list: document.getElementById('menuList'),
    thumb: document.getElementById('scrollThumb'),
    notif: document.getElementById('notifContainer')
  };

  function renderMenu(){
    el.list.innerHTML = menuItems.map((item,i)=>(
      `<li class="row ${i===selected?'active':''}" data-id="${item.id}">
         <span>${item.label}</span><span class="arrow">â€º</span>
       </li>`
    )).join('');
    updateScroll();
  }

  function updateScroll(){
    const rowHeight=32;
    el.thumb.style.top = (selected*rowHeight)+"px";
  }

  function addNotification(msg){
    const n=document.createElement("div");
    n.className="notif"; n.innerText=msg;
    el.notif.appendChild(n);
    setTimeout(()=>n.remove(),4000);
  }

  window.addEventListener('message', ev=>{
    const d=ev.data||{};
    if(d.action==="menu" && d.payload){ 
      menuItems = d.payload; selected=0; renderMenu();
    }
    if(d.action==="nav" && d.payload){
      if(d.payload.type==="up"   && selected>0){ selected--; renderMenu(); }
      if(d.payload.type==="down" && selected<menuItems.length-1){ selected++; renderMenu(); }
      if(d.payload.type==="enter"){ 
        const item = menuItems[selected];
        addNotification("Selected: "+item.label);
        window.parent.postMessage({action:"select",payload:item},"*");
      }
      if(d.payload.type==="back"){ addNotification("Back"); }
    }
  });

  renderMenu();
</script>
</body>
</html>
